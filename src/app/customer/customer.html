<div>
    <div class="flex items-center justify-center h-screen 
                bg-gradient-to-br from-black via-neutral-900 to-slate-900 p-3 md:p-0">
        
        <div class="bg-white/1 text-white p-8 rounded-2xl
                    backdrop-blur-md backdrop-saturate-150
                    shadow-lg max-w-md w-full relative">
            @if(isShown()) {
                <div class="h-full w-full absolute top-0 left-0 z-40 rounded-2xl" 
                    animation.enter="enter-animation"
                    animation.leave="leave-animation">
                    <div class="flex items-center h-full justify-center">
                        @if(customerInfo.hasValue()) {
                            <div>
                                @if( customerInfo.value().invalidReason !== null ) {
                                    <div class="flex items-center justify-center">
                                        <div class="p-6 flex flex-col justify-center gap-4 text-center">
                                            <app-custom-error 
                                                [errorMessage]="'Customer is not valid : ' + customerInfo.value().invalidReason">
                                            </app-custom-error>
                                            <app-custom-cancel-btn (close)="closeCustomerInfo()"></app-custom-cancel-btn>
                                        </div>
                                    </div>
                                } @else {
                                    <div>
                                        <div class="p-6 flex flex-col justify-center gap-4 text-center">
                                            <div class="font-bold">
                                                {{
                                                    customerInfo.value().descriptiveName 
                                                }}
                                            </div>
                                            <div class="text-md font-semibold text-gray-200">
                                                {{
                                                    customerInfo.value().timeZone
                                                }}
                                            </div>
                                        </div>
                                        <div class="flex justify-center items-center gap-4">
                                            <app-custom-cancel-btn (close)="closeCustomerInfo()"></app-custom-cancel-btn>
                                            <app-custom-confirm-btn (confirm)="confirm()" [path]="'/dashboard'" [buttonText]="'Continue'"></app-custom-confirm-btn>
                                        </div>
                                    </div>
                                }
                            </div>
                        } @else if(customerInfo.error()) {
                            <div class="flex items-center justify-center h-full">
                                <div>
                                    <app-custom-error 
                                        [errorMessage]="'Failed to validate customer. Please try again.'">
                                    </app-custom-error>
                                    <div class="flex justify-center my-4">
                                        <app-custom-cancel-btn (close)="closeCustomerInfo()"></app-custom-cancel-btn>
                                    </div>
                                </div>
                            </div> 
                        } @else if (customerIdsResource.isLoading()) {
                            <div class="flex items-center justify-center h-full">
                                <app-custom-loader 
                                    [srMessage]="'Loading customer information...'"></app-custom-loader>
                            </div> 
                        }
                    </div>
                </div>
            }
            <h1 class="text-2xl font-semibold mb-2" #customerTitleContainer>Select Customer</h1>
            <div class="text-white/80">
            
                <div class="justify-center flex mt-[2em]" #divCustomerInfo>
                    @if(customerIdsResource.hasValue()) {
                        <ul class="text-lg space-y-2 w-full">
                            @for (customer of customerIdsResource.value().customerIds; track customer) {
                                <div class="bg-white/1 text-white p-8 rounded-2xl
                                            backdrop-blur-md backdrop-saturate-150
                                            shadow-lg cursor-pointer" (click)="getCustomerInfo(customer)">
                                    <li class="flex justify-between">
                                        <div class="flex justify-between items-center gap-2">
                                            <div class="bg-purple-600/20 p-2 rounded-full">
                                                <img
                                                    src="/google_ads_icon.png"
                                                    alt="Logo Google Ads"
                                                    class="h-6 w-6 object-contain drop-shadow-[0_0_8px_rgba(59,130,246,0.4)]"
                                                />
                                            </div>
                                            <div class="font-semibold text-xl">
                                                {{customer}}
                                            </div>
                                        </div>
                                        <div>
                                            <i-lucide [img]="ArrowRightIcon" [size]="28" class="text-purple-600/80 drop-shadow-[0_0_8px_rgba(236,72,153,0.5)]"></i-lucide>
                                        </div>
                                    </li>
                                </div>
                            } @empty {
                                <div class="bg-white/1 text-white p-8 rounded-2xl
                                            backdrop-blur-md backdrop-saturate-150
                                            shadow-lg">
                                    <li class="font-medium">You have no customer available on your Google Ads Account. Did you created one ?</li>
                                </div>
                            }
                        </ul>
                    } @else if (customerIdsResource.error()) {
                        <div class="text-center mb-4">
                            <app-custom-error 
                                [errorMessage]="'Something wrong occured, please try again.'">
                            </app-custom-error>
                        </div>
                    } @else if (customerIdsResource.isLoading()) {
                        <div class="justify-center flex mb-[3em]">
                            <app-custom-loader 
                                [srMessage]="'Loading customer IDs...'"></app-custom-loader>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
